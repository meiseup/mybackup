doc -> /usr/share/aif/docs/official_installation_guide_en

# dmesg | grep firmware # /usr/sbin/iwconfig
make-wlan 
$ iw dev
$ iw dev wlan0 link
$ /sbin/ifconfig <interface> up | ip link set <interface> up
$ iw dev wlan0 station dump

$ dmesg | grep firmware #ip link set wlan0 up # ip link show wlan0
# /sbin/iwlist <interface> scan | iw dev <interface> scan

# mv /etc/wpa_supplicant.conf /etc/wpa_supplicant.conf.original

# wpa_passphrase ESSID psk > /etc/wpa_supplicant.conf

# wpa_supplicant -B -Dwext -i wlan0 -c /etc/wpa_supplicant.conf
# wpa_supplicant -i <interface> -c <(wpa_passphrase your_SSID your_key) | # wap_supplicant -i <interface> -c /etc/wap_supplicant/supplicant.conf

# iwconfig wlan0
# /sbin/dhcpcd <interface>
# dhcpcd wlan0  # dhclient wlan0

Installation guide

This document is a guide for installing Arch Linux from the live system booted with the official installation image. Before installing, it would be advised to view the FAQ. If looking for a more detailed installation guide see the Beginners' guide, or Category:Getting and installing Arch for specific installation cases.

Most help can be found on the wiki or through the various programs' man pages; see archlinux(7) for an overview of the configuration. For interactive help, the IRC channel and the forums are also available.
Contents

    1 Pre-installation
        1.1 Set the keyboard layout
        1.2 Connect to the Internet
        1.3 Update the system clock
        1.4 Partition the disks
        1.5 Format the partitions
        1.6 Mount the partitions
    2 Installation
        2.1 Select the mirrors
        2.2 Install the base packages
        2.3 Configure the system
        2.4 Install a boot loader
        2.5 Reboot
    3 Post-installation

Pre-installation

Download and boot the installation medium as explained in Category:Getting and installing Arch, then proceed with the rest of this guide.

The installation process needs to retrieve packages from a remote repository, therefore a working internet connection is required.
Set the keyboard layout

The default keyboard layout is US. Alternative keyboard layouts can be loaded with loadkeys keymap_file: keymap files can be found in /usr/share/kbd/keymaps/ (path and file extension can be omitted).
Connect to the Internet

Internet service via DHCP discovery is enabled on boot for supported wired devices; read more at Network configuration. For supported wireless devices run wifi-menu to set up the network; read more with Wireless network configuration. If needing a static IP or network management tools, stop the DHCP discovery service with systemctl stop dhcpcd@eth0.service, and read Netctl.
Update the system clock

See systemd-timesyncd.
Partition the disks

See Partitioning for details; some special partitions may be needed, see EFI System Partition and GRUB BIOS boot partition. If wanting to create any stacked block devices for LVM, disk encryption or RAID, do it now.
Format the partitions

See File systems and optionally Swap for details.
Mount the partitions

Mount the root partition on /mnt. After that, create directories for and mount any other partitions (/mnt/boot, /mnt/home, ...) and activate your swap partition if you want them to be detected later by genfstab.
Installation
Select the mirrors

Edit /etc/pacman.d/mirrorlist and select a download mirror(s). Regional mirrors usually work best; however, other criteria may be necessary to discern, read more on Mirrors. This copy of the mirrorlist file will later be copied on the new system by pacstrap, so it is worth getting it right.
Install the base packages

Use the pacstrap script to install the base group:

# pacstrap /mnt base

Other packages or groups can be installed by appending their names to the above command (space separated), possibly including the boot loader.
Configure the system

Generate an fstab file (use -U or -L to define by UUID or labels):

# genfstab -p /mnt >> /mnt/etc/fstab

Change root into the new system:

# arch-chroot /mnt

Set the hostname:

# echo computer_name > /etc/hostname

Set the time zone:

# ln -s /usr/share/zoneinfo/zone/subzone /etc/localtime

Uncomment the needed locales in /etc/locale.gen, then generate them with:

# locale-gen

Set locale preferences in /etc/locale.conf and possibly $HOME/.config/locale.conf:

# echo LANG=your_locale > /etc/locale.conf

Add console keymap and font preferences in /etc/vconsole.conf.

Configure the network for the newly installed environment: see Network configuration and Wireless network configuration.

Configure /etc/mkinitcpio.conf if additional features are needed. Create a new initial RAM disk with:

# mkinitcpio -p linux

Set the root password:

# passwd

Install a boot loader

See Boot loaders for the available choices and configuration.
Reboot

Exit the chroot environment by typing exit or pressing Ctrl+D.

Optionally manually unmount all the partitions with umount -R /mnt: this allows noticing any "busy" partitions, and finding the cause with fuser.

Finally, restart the machine by typing reboot: any partitions still mounted will be automatically unmounted by systemd. Remember to remove the installation media and then login into the new system with the root account.
Post-installation

See General recommendations for system management directions and post-installation tutorials (like setting up a graphical user interface, sound or a touchpad).

For a list of applications that may be of interest, see List of applications. s

为ArchLinux安装桌面和一些必要软件
[日期：2014-04-08] 	来源：Linux社区  作者：sunnypotter 	[字体：大 中 小]

接着  将ArchLinux安装到U盘上 http://www.linuxidc.com/Linux/2014-04/99749.htm

现在要给ArchLinux安装xorg-server,和DE(桌面环境):
 
# 1、关闭PC小喇叭
 # vim /etc/modprobe.d/nopcspkr.conf
 blacklist pcspkr
 
# 2.1、创建用户:
 useradd -m -g users -s /bin/bash sunny
 # 2.1.1 locale
 vim /etc/locale.gen
    + en_US.UTF-8 UTf-8
    + zh_CN.GBK GBK
    + zh_CN.UTF-8 UTF-8
    + zh_CN GB2312
 locale-gen
 
# 2.2、安装 X:
 pacman -S xorg-server xorg-xinit xorg-utils xorg-server-utils mesa
 
# 2.3、显卡驱动
 pacman -S xf86-video-vesa        # 通用显卡驱动，不提供任何2D和3D加速功能
 pacman -S xf86-video-intel        # Intel
 pacman -S xf86-video-nouveau    # Nvidia
 pacman -S nouveau-dri
 # pacman -S xf86-video-ati        # Ati
 #
 # 虚拟机: pcaman -S xf86-video-vesa
 
# 2.4、笔记本触摸板支持
 pacman -S xf86-input-synaptics
 
# 2.5、测试X工作是否正常
 pacman -S xorg-twm xorg-xclock xterm
 
# 2.6、现在可以用startx启动X看到简陋的图形界面.
 startx
 
# 3、安装桌面(xfce4 kde lxde gnome):
 # pacman -S gnome # gnome-session
 pacman -S kde # kde
 cp /etc/skel/.xinitrc $HOME/.xinitrc
 vim .xinitrc
    # + xrandr -s 1366x768 # 制定屏幕分辨率
    + exec startkde # kde
    # + exec gnome-session # gnome
 
# 4、安装fcitx输入法
 pcaman -S fcitx
pcaman -S kcm-fcitx # For kde
pacman -S fcitx-googlepinyin # Google拼音
 # 配置中文输入法：
 fcitx-configtool
 # 在Input Method -> 去掉Only Show Currentt Language勾 -> 搜索Chinese -> Google Pinyin
 #    在$HOME/.xinitrc里添加:
 vim $HOME/.xinitrc
    + export GTK_IM_MODULE=fcitx
    + export QT_IM_IMDULE=fcitx
    + export XMODIFIERS="@im=fcitx"
cp /etc/skel/.xinitrc $HOME/.xinitrc
vim .xinitrc
# + xrandr -s 1366x768 # 制定屏幕分辨率
+ exec startkde # kde
# + exec gnome-session # gnome

# 4、安装fcitx输入法
pcaman -S fcitx
pcaman -S kcm-fcitx # For kde
pacman -S fcitx-googlepinyin # Google拼音
# 配置中文输入法：
fcitx-configtool
# 在Input Method -> 去掉Only Show Currentt Language勾 -> 搜索Chinese -> Google Pinyin
# 在$HOME/.xinitrc里添加:
vim $HOME/.xinitrc
+ export GTK_IM_MODULE=fcitx
+ export QT_IM_IMDULE=fcitx
+ export XMODIFIERS="@im=fcitx"

# 5、KDM: KDE Display Manager : pacman -S kdm
# GDM: pacman -s gdm

# 6.Firefox flashplugin
pacman -S firefox flashplugin

# 7. yaourt
vim /etc/pacman.conf
+ [archlinuxfr]
+ SigLevel = Never
+ Server = http://repo.archlinux.fr/$arch

pacman -S yaourt

# 7.1 aur: google-chrome
pacman -S google-chrome

# 8.Some softwares
pacman -S openssh # sshd
pacman -S git # git
pacman -S subversion
pacman -S wget # wget
pacman -S net-tools # ifconfig
pacman -S dnsutils # nslookup

# 9.njit-client
mkdir build && cd build
wget https://github.com/linzsummer/njit8021xclient_for_swufe/archive/master.zip
unzip master.zip
pacman -S automake autoconf libpcap pkg-config
# pacman -S libssl
./configure
make
make install
cd .. && rm -rf build

# 10. wps: becauselibreoffice is too large, so instead of wps
vim /etc/pacman.conf
+ [multilib]
+ SigLevel = PackageRequired
+ Include = /etc/pacman.d/mirrorlist
pacman -Syu # renew database (Repository multilib)
yaourt -S kingsoft-office

# 11. gnome shortcuts
Super+(pg up)/(pg dn) # exchange screen

# 12. Find the real path of the Command
# type [Command]
type firefox

# 13. clean pacman cache
pacman -Scc
pacman -S -l # list pacman install packages

# 14.Static IP Address
cd /etc/netctl
cp examples/ethernet-static my-network
# Then edit the profile as needed
vim my-network
# Next, Start Netctl
netctl enable my-network
netctl start my-network
 
# 5、KDM: KDE Display Manager : pacman -S kdm
 #    GDM: pacman -s gdm
 
# 6.Firefox  flashplugin
 pacman -S firefox flashplugin
 
# 7. yaourt
 vim /etc/pacman.conf
    + [archlinuxfr]
    + SigLevel = Never
    + Server = http://repo.archlinux.fr/$arch
 
pacman -S yaourt
 
# 7.1 aur: google-chrome
 pacman -S google-chrome
 
# 8.Some softwares
 pacman -S openssh    # sshd
 pacman -S git        # git
 pacman -S subversion
 pacman -S wget        # wget
 pacman -S net-tools    # ifconfig
 pacman -S dnsutils    # nslookup
 
# 9.njit-client
 mkdir build && cd build
 wget https://github.com/linzsummer/njit8021xclient_for_swufe/archive/master.zip
 unzip master.zip
 pacman -S automake autoconf libpcap pkg-config
 # pacman -S  libssl
 ./configure
 make
 make install
 cd .. && rm -rf build
 
# 10. wps: becauselibreoffice is too large, so instead of wps
 vim /etc/pacman.conf
    + [multilib]
    + SigLevel = PackageRequired
    + Include = /etc/pacman.d/mirrorlist
 pacman -Syu    # renew database (Repository multilib)
 yaourt -S kingsoft-office
 
# 11. gnome shortcuts
 Super+(pg up)/(pg dn)    # exchange screen
 
# 12. Find the real path of the Command
 # type [Command]
 type firefox
 
# 13. clean pacman cache
 pacman -Scc
 pacman -S -l # list pacman install packages
 
# 14.Static IP Address
 cd /etc/netctl
 cp examples/ethernet-static my-network
 # Then edit the profile as needed
 vim my-network
 # Next, Start Netctl
 netctl enable my-network
 netctl start my-network


    # efivar -l

    若 efivar 正确地列出了 UEFI 变量，则本机为 UEFI 系统，否则为 BIOS。

+++
+++ 配置 ArchISO
+++ +++++++++++++++++++++++++++
预设：

    键盘布局：US （美式键盘）

    locale：en_US.UTF-8（美式英语）

    网络连接：dhcpcd（有线连接）

配置：

    键盘布局：

    # localectl list-keymaps	# 查看可用键盘布局
    # loadkeys <键盘布局>

    终端字体：

    # ls /usr/share/kbd/consolefonts/	# 查看可用终端字体
    # setfornt <终端字体>

    显示语言（不建议中文用户修改）：

    # nano /etc/locale.gen    # 反注释需要的 locale
    # locale-gen
    # export LANG=<语言>

    网络连接：

        无线连接：

        # wifi-menu

        ADSL 宽带连接：

        # pppoe-setup	# 配置
        # systemctl start adsl	# 连接

    同步时间

    # timedatectl set-ntp true


